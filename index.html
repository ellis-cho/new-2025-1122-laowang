<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¼šè¯´è¯çš„99ä¹˜æ³•è¡¨</title>
    <style>
        /* å¡é€šé£æ ¼è®¾ç½® */
        body {
            font-family: "YouYuan", "å¹¼åœ†", "Comic Sans MS", sans-serif;
            background-color: #fff0f6; /* æµ…ç²‰èƒŒæ™¯ */
            display: flex;
            flex-direction: column;
            align-items: center;
            user-select: none; /* ç¦æ­¢é€‰ä¸­æ–‡æœ¬ï¼Œé˜²æ­¢è¯¯è§¦ */
            padding-bottom: 50px;
        }
        
        h1 { color: #ff6b81; text-shadow: 2px 2px #ffffff; margin: 15px; }

        /* æ§åˆ¶æŒ‰é’®åŒºåŸŸ */
        .controls { margin-bottom: 20px; display: flex; gap: 15px; }
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            cursor: pointer;
            font-weight: bold;
            color: white;
            box-shadow: 0 4px 0 rgba(0,0,0,0.1);
            transition: transform 0.1s;
        }
        .btn:active { transform: translateY(4px); box-shadow: none; }
        .btn-hide { background-color: #a29bfe; }
        .btn-show { background-color: #00b894; }

        /* ä¹˜æ³•è¡¨å¸ƒå±€ */
        .container { display: flex; flex-direction: column; gap: 8px; }
        .row { display: flex; gap: 8px; }

        /* å¡ç‰‡æ ·å¼ */
        .cell {
            background: white;
            border: 2px solid;
            border-radius: 10px;
            padding: 8px 5px;
            width: 100px;
            text-align: center;
            font-size: 15px;
            font-weight: bold;
            cursor: pointer;
            position: relative;
            transition: all 0.2s;
            box-shadow: 3px 3px 0 rgba(0,0,0,0.05);
        }
        
        /* é¼ æ ‡æ‚¬åœ */
        .cell:hover { transform: translateY(-3px); box-shadow: 3px 6px 0 rgba(0,0,0,0.1); }
        
        /* ç‚¹å‡»åçš„æ¿€æ´»çŠ¶æ€ */
        .cell:active { transform: scale(0.95); }

        /* ç­”æ¡ˆéšè—æ—¶çš„æ ·å¼ */
        .mask .result { display: none; }
        .mask::after { content: "?"; color: #ccc; }

        /* é¢œè‰²å®šä¹‰ */
        .c-1 { border-color: #ff9ff3; color: #ff9ff3; }
        .c-2 { border-color: #feca57; color: #feca57; }
        .c-3 { border-color: #ff6b6b; color: #ff6b6b; }
        .c-4 { border-color: #48dbfb; color: #48dbfb; }
        .c-5 { border-color: #1dd1a1; color: #1dd1a1; }
        .c-6 { border-color: #5f27cd; color: #5f27cd; }
        .c-7 { border-color: #54a0ff; color: #54a0ff; }
        .c-8 { border-color: #00d2d3; color: #00d2d3; }
        .c-9 { border-color: #ff9f43; color: #ff9f43; }
        
        /* è¢«æœ—è¯»æ—¶çš„æ¿€æ´»æ ·å¼ */
        .speaking { background-color: #ffeaa7 !important; border-color: #fdcb6e !important; color: #d35400 !important; transform: scale(1.1) !important; z-index: 10;}
    </style>
</head>
<body>

    <h1>ğŸ”Š ä¼šè¯´è¯çš„ä¹˜æ³•è¡¨ ğŸ²</h1>

    <div class="controls">
        <button class="btn btn-hide" onclick="toggleMode(true)">ğŸ«£ è€ƒè€ƒæˆ‘ (éšè—ç­”æ¡ˆ)</button>
        <button class="btn btn-show" onclick="toggleMode(false)">ğŸ‘€ çœ‹ç­”æ¡ˆ (æ˜¾ç¤ºå…¨éƒ¨)</button>
    </div>

    <div id="table" class="container"></div>

    <script>
        const tableDiv = document.getElementById('table');
        let isMaskMode = false; // å½“å‰æ˜¯å¦æ˜¯é®ç½©æ¨¡å¼

        // 1. ç”Ÿæˆè¡¨æ ¼
        for (let i = 1; i <= 9; i++) {
            let rowDiv = document.createElement('div');
            rowDiv.className = 'row';
            
            for (let j = 1; j <= i; j++) {
                let cell = document.createElement('div');
                cell.className = `cell c-${i}`;
                // HTMLç»“æ„ï¼šå‰é¢æ˜¯ç®—å¼ï¼ŒspanåŒ…è£¹ç»“æœä»¥ä¾¿éšè—
                cell.innerHTML = `${j}Ã—${i}=<span class="result">${i*j}</span>`;
                
                // ç»‘å®šç‚¹å‡»äº‹ä»¶
                cell.onclick = () => playAudio(j, i, cell);
                
                rowDiv.appendChild(cell);
            }
            tableDiv.appendChild(rowDiv);
        }

        // 2. åˆ‡æ¢æ¨¡å¼ï¼ˆéšè—/æ˜¾ç¤ºç­”æ¡ˆï¼‰
        function toggleMode(hide) {
            isMaskMode = hide;
            const cells = document.querySelectorAll('.cell');
            cells.forEach(cell => {
                if (hide) cell.classList.add('mask');
                else cell.classList.remove('mask');
            });
        }

        // 3. è¯­éŸ³æœ—è¯»åŠŸèƒ½
        function playAudio(j, i, element) {
            // å¦‚æœåœ¨éšè—æ¨¡å¼ä¸‹ç‚¹å‡»ï¼Œä¸´æ—¶æ˜¾ç¤ºç­”æ¡ˆ
            if (isMaskMode) {
                element.classList.remove('mask');
            }

            // æ·»åŠ é«˜äº®åŠ¨ç”»
            document.querySelectorAll('.cell').forEach(c => c.classList.remove('speaking'));
            element.classList.add('speaking');
            setTimeout(() => element.classList.remove('speaking'), 1000);

            // åˆæˆè¯­éŸ³æ–‡æœ¬ (å£è¯­åŒ–ï¼šäºŒäºŒå¾—å››ï¼Œä¸‰äº”åäº”)
            let text = `${toChinese(j)}${toChinese(i)}`;
            let res = i * j;
            // ç®€å•çš„å£è¯€é€»è¾‘å¤„ç†
            if (res < 10) text += "å¾—"; 
            text += toChinese(res);
            
            // é’ˆå¯¹ "1x1" ç­‰ç‰¹æ®Šæƒ…å†µä¼˜åŒ–è¯»éŸ³ï¼ˆä¹Ÿå¯ç›´æ¥è¯»æ•°å­—ï¼‰
            // è¿™é‡Œä¸ºäº†é€šç”¨ç®€å•ï¼Œæˆ‘ä»¬è®©å®ƒç›´æ¥è¯»ç®—å¼ï¼Œæ¯”å¦‚ "2 ä¹˜ 3 ç­‰äº 6" 
            // å¦‚æœæƒ³è¦çº¯æ­£å£è¯€ï¼Œä¸Šé¢çš„é€»è¾‘å¯ç”¨ï¼Œä½†ä¸‹é¢è¿™è¡Œæ›´ç¨³å¦¥é€‚é…æ‰€æœ‰æµè§ˆå™¨ï¼š
            let speakText = `${j} ä¹˜ ${i} ç­‰äº ${i*j}`;

            // è°ƒç”¨æµè§ˆå™¨TTS
            const utterance = new SpeechSynthesisUtterance(speakText);
            utterance.rate = 1; // è¯­é€Ÿ
            utterance.pitch = 1.2; // è¯­è°ƒé«˜ä¸€ç‚¹æ›´åƒå¡é€šéŸ³
            utterance.lang = 'zh-CN';
            window.speechSynthesis.cancel(); // æ‰“æ–­ä¹‹å‰çš„æœ—è¯»
            window.speechSynthesis.speak(utterance);
        }

        // è¾…åŠ©ï¼šæ•°å­—è½¬ä¸­æ–‡ï¼ˆå¦‚æœæƒ³åšçº¯æ­£å£è¯€å¯ä»¥ç”¨è¿™ä¸ªæ‰©å……ï¼Œç›®å‰ä»£ç ä½¿ç”¨â€œä¹˜ç­‰äºâ€è¯»æ³•ï¼‰
        function toChinese(num) {
            const chn = ['é›¶','ä¸€','äºŒ','ä¸‰','å››','äº”','å…­','ä¸ƒ','å…«','ä¹'];
            if(num < 10) return chn[num];
            if(num < 20) return "å" + (num%10===0?'':chn[num%10]);
            return chn[Math.floor(num/10)] + "å" + (num%10===0?'':chn[num%10]);
        }
    </script>
</body>
</html>
